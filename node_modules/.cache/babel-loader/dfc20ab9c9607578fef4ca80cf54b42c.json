{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar js_analytics_1 = require(\"@giphy/js-analytics\");\n\nvar js_util_1 = require(\"@giphy/js-util\");\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar util_1 = require(\"./util\");\n\nvar quartileEvents = [0.25, 0.5, 0.75];\nvar videoClassName = 'giphy-video';\nvar Network = {\n  // The element has not yet been initialized. All attributes are in their initial states.\n  EMPTY: 0,\n  // The element's resource selection algorithm is active and has selected a resource, but it is not actually using the network at this time.\n  IDLE: 1,\n  // The user agent is actively trying to download data.\n  LOADING: 2,\n  // The element's resource selection algorithm is active, but it has not yet found a resource to use.\n  NO_SOURCE: 3\n};\n\nvar Video = function (_a) {\n  var _b, _c, _d;\n\n  var muted = _a.muted,\n      _e = _a.ccEnabled,\n      ccEnabled = _e === void 0 ? false : _e,\n      _f = _a.ccLanguage,\n      ccLanguage = _f === void 0 ? 'en' : _f,\n      _g = _a.loop,\n      loop = _g === void 0 ? true : _g,\n      onStateChange = _a.onStateChange,\n      onTimeUpdate = _a.onTimeUpdate,\n      onCanPlay = _a.onCanPlay,\n      onFirstPlay = _a.onFirstPlay,\n      onWaiting = _a.onWaiting,\n      onMuted = _a.onMuted,\n      onError = _a.onError,\n      onEnded = _a.onEnded,\n      onLoop = _a.onLoop,\n      onQuartile = _a.onQuartile,\n      onEndFullscreen = _a.onEndFullscreen,\n      setVideoEl = _a.setVideoEl,\n      gif = _a.gif,\n      width = _a.width,\n      height_ = _a.height,\n      _h = _a.volume,\n      volume = _h === void 0 ? 0.7 : _h,\n      _j = _a.className,\n      className = _j === void 0 ? videoClassName : _j;\n  var height = height_ || js_util_1.getGifHeight(gif, width); // state\n\n  var _k = react_1.useState(js_util_1.getBestVideo(gif.video, width, height)),\n      media = _k[0],\n      setMedia = _k[1];\n\n  var seek = react_1.useRef(0);\n\n  if (!media) {\n    // Not all gif requests have video content\n    // use { type: 'videos' } for search or trending endpoints\n    console.warn(\"GiphyJS No video content for id: \" + gif.id);\n  }\n\n  var mountTime = react_1.useRef(Date.now());\n  var hasPlayingFired = react_1.useRef(false);\n  var loopNumber = react_1.useRef(0);\n  var waitingCount = react_1.useRef(0);\n  var quartilesFired = react_1.useRef(new Set()); // reset the above when the gif.id changes\n\n  react_1.useEffect(function () {\n    mountTime.current = Date.now();\n    hasPlayingFired.current = false;\n    loopNumber.current = 1;\n    waitingCount.current = 0;\n    quartilesFired.current = new Set();\n  }, [gif.id]);\n  var videoEl = react_1.useRef(null);\n  react_1.useEffect(function () {\n    // when the width and height change, check if there's a new url\n    var newMedia = js_util_1.getBestVideo(gif.video, width, height);\n\n    if (videoEl.current && (media === null || media === void 0 ? void 0 : media.url) && newMedia.url !== media.url) {\n      // we may have changed gifs, we don't want to seek then\n      if (media.url.indexOf(String(gif.id)) !== -1) {\n        // when the media changes set the current seek time\n        seek.current = videoEl.current.currentTime;\n      } // triggers re-render with above seek time\n\n\n      setMedia(newMedia);\n    }\n  }, [width, height_, gif.video, height, media === null || media === void 0 ? void 0 : media.url, gif.id]);\n  react_1.useEffect(function () {\n    if (videoEl.current && (media === null || media === void 0 ? void 0 : media.url) && seek.current) {\n      videoEl.current.currentTime = seek.current;\n      seek.current = 0;\n    }\n  }, [media === null || media === void 0 ? void 0 : media.url, seek]);\n\n  var _onError = react_1.useCallback(function () {\n    var _a;\n\n    var el = videoEl.current;\n    var code = (_a = el === null || el === void 0 ? void 0 : el.error) === null || _a === void 0 ? void 0 : _a.code;\n\n    if (code && (el === null || el === void 0 ? void 0 : el.src)) {\n      var message = util_1.getErrorMessage(code, el === null || el === void 0 ? void 0 : el.src);\n      console.error(message);\n      onError === null || onError === void 0 ? void 0 : onError(code);\n    }\n  }, [onError]);\n\n  var _onPlaying = react_1.useCallback(function () {\n    onStateChange === null || onStateChange === void 0 ? void 0 : onStateChange('playing');\n\n    if (!hasPlayingFired.current) {\n      hasPlayingFired.current = true;\n\n      if (gif.analytics_response_payload) {\n        js_analytics_1.pingback({\n          actionType: 'START',\n          analyticsResponsePayload: gif.analytics_response_payload\n        });\n      }\n\n      onFirstPlay === null || onFirstPlay === void 0 ? void 0 : onFirstPlay(Date.now() - mountTime.current);\n    }\n  }, [onFirstPlay, onStateChange, gif]);\n\n  var _onPaused = react_1.useCallback(function () {\n    return onStateChange === null || onStateChange === void 0 ? void 0 : onStateChange('paused');\n  }, [onStateChange]);\n\n  var _onTimeUpdate = react_1.useCallback(function () {\n    var el = videoEl.current;\n\n    if (el) {\n      var playhead_1 = el.currentTime;\n      quartileEvents.some(function (q) {\n        if (util_1.shouldFireQuartile(q, playhead_1, el.duration, quartilesFired.current, loopNumber.current)) {\n          onQuartile === null || onQuartile === void 0 ? void 0 : onQuartile(q);\n          return true;\n        }\n\n        return false;\n      });\n      onTimeUpdate === null || onTimeUpdate === void 0 ? void 0 : onTimeUpdate(playhead_1 || 0);\n    }\n  }, [onQuartile, onTimeUpdate]);\n\n  var _onCanPlay = react_1.useCallback(function () {\n    return onCanPlay === null || onCanPlay === void 0 ? void 0 : onCanPlay();\n  }, [onCanPlay]);\n\n  var _onWaiting = react_1.useCallback(function () {\n    var el = videoEl.current; // we get a waiting event after a loop, so ignore the first one while the play head is 0\n\n    if ((el === null || el === void 0 ? void 0 : el.currentTime) !== 0 && (el === null || el === void 0 ? void 0 : el.networkState) !== Network.IDLE) {\n      onWaiting === null || onWaiting === void 0 ? void 0 : onWaiting(++waitingCount.current);\n    }\n  }, [onWaiting]);\n\n  var _onEnded = react_1.useCallback(function () {\n    // helps prevent two ended events when changing media\n    if (!hasPlayingFired.current) {\n      return;\n    }\n\n    if (loop && videoEl.current) {\n      videoEl.current.play();\n    }\n\n    onLoop === null || onLoop === void 0 ? void 0 : onLoop(loopNumber.current);\n    loopNumber.current = loopNumber.current + 1;\n    onEnded === null || onEnded === void 0 ? void 0 : onEnded();\n  }, [onEnded, loop, onLoop]);\n\n  var _onEndFullscreen = react_1.useCallback(function () {\n    return onEndFullscreen === null || onEndFullscreen === void 0 ? void 0 : onEndFullscreen();\n  }, [onEndFullscreen]);\n\n  var tryAutoPlayWithSound = react_1.useCallback(function (videoEl) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var promisePlay, error_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!videoEl) return [3\n            /*break*/\n            , 4];\n            promisePlay = videoEl.play();\n            if (!(promisePlay !== undefined)) return [3\n            /*break*/\n            , 4];\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , promisePlay];\n\n          case 2:\n            _a.sent();\n\n            onMuted === null || onMuted === void 0 ? void 0 : onMuted(false);\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            error_1 = _a.sent(); // Autoplay not allowed!\n            // Mute video and try to play again\n\n            videoEl.muted = true; // Allow the UI to show that the video is muted\n\n            onMuted === null || onMuted === void 0 ? void 0 : onMuted(true);\n            videoEl.play();\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [onMuted]);\n  react_1.useEffect(function () {\n    var el = videoEl.current;\n\n    if (el) {\n      tryAutoPlayWithSound(el);\n      setVideoEl === null || setVideoEl === void 0 ? void 0 : setVideoEl(el);\n\n      if (!isNaN(volume)) {\n        el.volume = volume;\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  react_1.useEffect(function () {\n    var el = videoEl.current;\n\n    if (el) {\n      el.addEventListener('play', _onPlaying);\n      el.addEventListener('pause', _onPaused);\n      el.addEventListener('error', _onError);\n      el.addEventListener('timeupdate', _onTimeUpdate);\n      el.addEventListener('canplay', _onCanPlay);\n      el.addEventListener('ended', _onEnded);\n      el.addEventListener('waiting', _onWaiting);\n      el.addEventListener('webkitendfullscreen', _onEndFullscreen); // this is needed for iOS\n    }\n\n    return function () {\n      if (el) {\n        el.removeEventListener('play', _onPlaying);\n        el.removeEventListener('pause', _onPaused);\n        el.removeEventListener('error', _onError);\n        el.removeEventListener('timeupdate', _onTimeUpdate);\n        el.removeEventListener('canplay', _onCanPlay);\n        el.removeEventListener('ended', _onEnded);\n        el.removeEventListener('waiting', _onWaiting);\n        el.removeEventListener('webkitendfullscreen', _onEndFullscreen);\n      }\n    };\n  }, [_onPlaying, _onPaused, _onError, _onTimeUpdate, _onCanPlay, _onEnded, _onWaiting, _onEndFullscreen]);\n  var captionSrc = (_d = (_c = (_b = gif.video) === null || _b === void 0 ? void 0 : _b.captions) === null || _c === void 0 ? void 0 : _c[ccLanguage]) === null || _d === void 0 ? void 0 : _d.vtt;\n  return (media === null || media === void 0 ? void 0 : media.url) ? react_1.default.createElement(\"video\", {\n    crossOrigin: \"anonymous\",\n    draggable: true,\n    className: className,\n    width: width,\n    height: height,\n    muted: muted,\n    autoPlay: true,\n    playsInline: true,\n    ref: videoEl,\n    src: media === null || media === void 0 ? void 0 : media.url\n  }, ccEnabled && captionSrc && react_1.default.createElement(\"track\", {\n    label: \"English\",\n    kind: \"subtitles\",\n    srcLang: ccLanguage,\n    src: captionSrc,\n    default: true\n  })) : null;\n};\n\nVideo.className = videoClassName;\nexports.default = Video;","map":{"version":3,"sources":["../../../src/components/video/video.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar js_analytics_1 = require(\"@giphy/js-analytics\");\nvar js_util_1 = require(\"@giphy/js-util\");\nvar react_1 = __importStar(require(\"react\"));\nvar util_1 = require(\"./util\");\nvar quartileEvents = [0.25, 0.5, 0.75];\nvar videoClassName = 'giphy-video';\nvar Network = {\n    // The element has not yet been initialized. All attributes are in their initial states.\n    EMPTY: 0,\n    // The element's resource selection algorithm is active and has selected a resource, but it is not actually using the network at this time.\n    IDLE: 1,\n    // The user agent is actively trying to download data.\n    LOADING: 2,\n    // The element's resource selection algorithm is active, but it has not yet found a resource to use.\n    NO_SOURCE: 3,\n};\nvar Video = function (_a) {\n    var _b, _c, _d;\n    var muted = _a.muted, _e = _a.ccEnabled, ccEnabled = _e === void 0 ? false : _e, _f = _a.ccLanguage, ccLanguage = _f === void 0 ? 'en' : _f, _g = _a.loop, loop = _g === void 0 ? true : _g, onStateChange = _a.onStateChange, onTimeUpdate = _a.onTimeUpdate, onCanPlay = _a.onCanPlay, onFirstPlay = _a.onFirstPlay, onWaiting = _a.onWaiting, onMuted = _a.onMuted, onError = _a.onError, onEnded = _a.onEnded, onLoop = _a.onLoop, onQuartile = _a.onQuartile, onEndFullscreen = _a.onEndFullscreen, setVideoEl = _a.setVideoEl, gif = _a.gif, width = _a.width, height_ = _a.height, _h = _a.volume, volume = _h === void 0 ? 0.7 : _h, _j = _a.className, className = _j === void 0 ? videoClassName : _j;\n    var height = height_ || js_util_1.getGifHeight(gif, width);\n    // state\n    var _k = react_1.useState(js_util_1.getBestVideo(gif.video, width, height)), media = _k[0], setMedia = _k[1];\n    var seek = react_1.useRef(0);\n    if (!media) {\n        // Not all gif requests have video content\n        // use { type: 'videos' } for search or trending endpoints\n        console.warn(\"GiphyJS No video content for id: \" + gif.id);\n    }\n    var mountTime = react_1.useRef(Date.now());\n    var hasPlayingFired = react_1.useRef(false);\n    var loopNumber = react_1.useRef(0);\n    var waitingCount = react_1.useRef(0);\n    var quartilesFired = react_1.useRef(new Set());\n    // reset the above when the gif.id changes\n    react_1.useEffect(function () {\n        mountTime.current = Date.now();\n        hasPlayingFired.current = false;\n        loopNumber.current = 1;\n        waitingCount.current = 0;\n        quartilesFired.current = new Set();\n    }, [gif.id]);\n    var videoEl = react_1.useRef(null);\n    react_1.useEffect(function () {\n        // when the width and height change, check if there's a new url\n        var newMedia = js_util_1.getBestVideo(gif.video, width, height);\n        if (videoEl.current && (media === null || media === void 0 ? void 0 : media.url) && newMedia.url !== media.url) {\n            // we may have changed gifs, we don't want to seek then\n            if (media.url.indexOf(String(gif.id)) !== -1) {\n                // when the media changes set the current seek time\n                seek.current = videoEl.current.currentTime;\n            }\n            // triggers re-render with above seek time\n            setMedia(newMedia);\n        }\n    }, [width, height_, gif.video, height, media === null || media === void 0 ? void 0 : media.url, gif.id]);\n    react_1.useEffect(function () {\n        if (videoEl.current && (media === null || media === void 0 ? void 0 : media.url) && seek.current) {\n            videoEl.current.currentTime = seek.current;\n            seek.current = 0;\n        }\n    }, [media === null || media === void 0 ? void 0 : media.url, seek]);\n    var _onError = react_1.useCallback(function () {\n        var _a;\n        var el = videoEl.current;\n        var code = (_a = el === null || el === void 0 ? void 0 : el.error) === null || _a === void 0 ? void 0 : _a.code;\n        if (code && (el === null || el === void 0 ? void 0 : el.src)) {\n            var message = util_1.getErrorMessage(code, el === null || el === void 0 ? void 0 : el.src);\n            console.error(message);\n            onError === null || onError === void 0 ? void 0 : onError(code);\n        }\n    }, [onError]);\n    var _onPlaying = react_1.useCallback(function () {\n        onStateChange === null || onStateChange === void 0 ? void 0 : onStateChange('playing');\n        if (!hasPlayingFired.current) {\n            hasPlayingFired.current = true;\n            if (gif.analytics_response_payload) {\n                js_analytics_1.pingback({ actionType: 'START', analyticsResponsePayload: gif.analytics_response_payload });\n            }\n            onFirstPlay === null || onFirstPlay === void 0 ? void 0 : onFirstPlay(Date.now() - mountTime.current);\n        }\n    }, [onFirstPlay, onStateChange, gif]);\n    var _onPaused = react_1.useCallback(function () { return onStateChange === null || onStateChange === void 0 ? void 0 : onStateChange('paused'); }, [onStateChange]);\n    var _onTimeUpdate = react_1.useCallback(function () {\n        var el = videoEl.current;\n        if (el) {\n            var playhead_1 = el.currentTime;\n            quartileEvents.some(function (q) {\n                if (util_1.shouldFireQuartile(q, playhead_1, el.duration, quartilesFired.current, loopNumber.current)) {\n                    onQuartile === null || onQuartile === void 0 ? void 0 : onQuartile(q);\n                    return true;\n                }\n                return false;\n            });\n            onTimeUpdate === null || onTimeUpdate === void 0 ? void 0 : onTimeUpdate(playhead_1 || 0);\n        }\n    }, [onQuartile, onTimeUpdate]);\n    var _onCanPlay = react_1.useCallback(function () { return onCanPlay === null || onCanPlay === void 0 ? void 0 : onCanPlay(); }, [onCanPlay]);\n    var _onWaiting = react_1.useCallback(function () {\n        var el = videoEl.current;\n        // we get a waiting event after a loop, so ignore the first one while the play head is 0\n        if ((el === null || el === void 0 ? void 0 : el.currentTime) !== 0 && (el === null || el === void 0 ? void 0 : el.networkState) !== Network.IDLE) {\n            onWaiting === null || onWaiting === void 0 ? void 0 : onWaiting(++waitingCount.current);\n        }\n    }, [onWaiting]);\n    var _onEnded = react_1.useCallback(function () {\n        // helps prevent two ended events when changing media\n        if (!hasPlayingFired.current) {\n            return;\n        }\n        if (loop && videoEl.current) {\n            videoEl.current.play();\n        }\n        onLoop === null || onLoop === void 0 ? void 0 : onLoop(loopNumber.current);\n        loopNumber.current = loopNumber.current + 1;\n        onEnded === null || onEnded === void 0 ? void 0 : onEnded();\n    }, [onEnded, loop, onLoop]);\n    var _onEndFullscreen = react_1.useCallback(function () { return onEndFullscreen === null || onEndFullscreen === void 0 ? void 0 : onEndFullscreen(); }, [onEndFullscreen]);\n    var tryAutoPlayWithSound = react_1.useCallback(function (videoEl) { return __awaiter(void 0, void 0, void 0, function () {\n        var promisePlay, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!videoEl) return [3 /*break*/, 4];\n                    promisePlay = videoEl.play();\n                    if (!(promisePlay !== undefined)) return [3 /*break*/, 4];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, promisePlay];\n                case 2:\n                    _a.sent();\n                    onMuted === null || onMuted === void 0 ? void 0 : onMuted(false);\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    // Autoplay not allowed!\n                    // Mute video and try to play again\n                    videoEl.muted = true;\n                    // Allow the UI to show that the video is muted\n                    onMuted === null || onMuted === void 0 ? void 0 : onMuted(true);\n                    videoEl.play();\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); }, [onMuted]);\n    react_1.useEffect(function () {\n        var el = videoEl.current;\n        if (el) {\n            tryAutoPlayWithSound(el);\n            setVideoEl === null || setVideoEl === void 0 ? void 0 : setVideoEl(el);\n            if (!isNaN(volume)) {\n                el.volume = volume;\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    react_1.useEffect(function () {\n        var el = videoEl.current;\n        if (el) {\n            el.addEventListener('play', _onPlaying);\n            el.addEventListener('pause', _onPaused);\n            el.addEventListener('error', _onError);\n            el.addEventListener('timeupdate', _onTimeUpdate);\n            el.addEventListener('canplay', _onCanPlay);\n            el.addEventListener('ended', _onEnded);\n            el.addEventListener('waiting', _onWaiting);\n            el.addEventListener('webkitendfullscreen', _onEndFullscreen); // this is needed for iOS\n        }\n        return function () {\n            if (el) {\n                el.removeEventListener('play', _onPlaying);\n                el.removeEventListener('pause', _onPaused);\n                el.removeEventListener('error', _onError);\n                el.removeEventListener('timeupdate', _onTimeUpdate);\n                el.removeEventListener('canplay', _onCanPlay);\n                el.removeEventListener('ended', _onEnded);\n                el.removeEventListener('waiting', _onWaiting);\n                el.removeEventListener('webkitendfullscreen', _onEndFullscreen);\n            }\n        };\n    }, [_onPlaying, _onPaused, _onError, _onTimeUpdate, _onCanPlay, _onEnded, _onWaiting, _onEndFullscreen]);\n    var captionSrc = (_d = (_c = (_b = gif.video) === null || _b === void 0 ? void 0 : _b.captions) === null || _c === void 0 ? void 0 : _c[ccLanguage]) === null || _d === void 0 ? void 0 : _d.vtt;\n    return (media === null || media === void 0 ? void 0 : media.url) ? (react_1.default.createElement(\"video\", { crossOrigin: \"anonymous\", draggable: true, className: className, width: width, height: height, muted: muted, autoPlay: true, playsInline: true, ref: videoEl, src: media === null || media === void 0 ? void 0 : media.url }, ccEnabled && captionSrc && (react_1.default.createElement(\"track\", { label: \"English\", kind: \"subtitles\", srcLang: ccLanguage, src: captionSrc, default: true })))) : null;\n};\nVideo.className = videoClassName;\nexports.default = Video;\n//# sourceMappingURL=video.js.map"]},"metadata":{},"sourceType":"script"}