{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar styled_1 = __importDefault(require(\"@emotion/styled\"));\n\nvar js_util_1 = require(\"@giphy/js-util\");\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_use_1 = require(\"react-use\");\n\nvar attribution_1 = __importDefault(require(\"./attribution\"));\n\nvar volume_1 = require(\"./controls/volume\");\n\nvar progress_bar_1 = __importDefault(require(\"./progress-bar\"));\n\nvar video_1 = __importDefault(require(\"./video\"));\n\nvar Container = styled_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    position: relative;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: black;\\n    font-family: interface, helvetica, arial;\\n    -webkit-font-smoothing: antialiased;\\n\"], [\"\\n    position: relative;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: black;\\n    font-family: interface, helvetica, arial;\\n    -webkit-font-smoothing: antialiased;\\n\"])));\nvar Volume = styled_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    position: relative;\\n    cursor: pointer;\\n\"], [\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    position: relative;\\n    cursor: pointer;\\n\"])));\nvar Controls = styled_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n    position: absolute;\\n    top: 10px;\\n    right: 10px;\\n    left: 10px;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    opacity: \", \";\\n    transition: opacity ease-out 250ms;\\n    align-items: flex-start;\\n\"], [\"\\n    position: absolute;\\n    top: 10px;\\n    right: 10px;\\n    left: 10px;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    opacity: \", \";\\n    transition: opacity ease-out 250ms;\\n    align-items: flex-start;\\n\"])), function (props) {\n  return props.isHovered ? 1 : 0;\n});\nvar Title = styled_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n    font-size: 26px;\\n    color: white;\\n    margin-bottom: 5px;\\n    font-weight: bold;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    user-select: none;\\n    cursor: pointer;\\n\"], [\"\\n    font-size: 26px;\\n    color: white;\\n    margin-bottom: 5px;\\n    font-weight: bold;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    user-select: none;\\n    cursor: pointer;\\n\"])));\nvar TitleContainer = styled_1.default.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n    position: relative;\\n    min-width: 0;\\n\"], [\"\\n    position: relative;\\n    min-width: 0;\\n\"])));\nvar Gradient = styled_1.default.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n    &:before {\\n        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n    }\\n    &:after {\\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        bottom: 0;\\n        width: 100%;\\n    }\\n\"], [\"\\n    &:before {\\n        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n    }\\n    &:after {\\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        bottom: 0;\\n        width: 100%;\\n    }\\n\"])), function (props) {\n  return props.isLargePlayer ? 125 : 75;\n}, function (props) {\n  return props.isLargePlayer ? 125 : 75;\n});\nvar LARGE_PLAYER_HEIGHT = 300;\nvar AUTO_HIDE_TIMEOUT = 4000;\n\nvar VideoPlayer = function (props) {\n  var width = props.width,\n      hideMute = props.hideMute,\n      hideAttribution = props.hideAttribution,\n      hideProgressBar = props.hideProgressBar,\n      className = props.className,\n      persistentControls = props.persistentControls,\n      gif = props.gif,\n      Overlay = props.overlay;\n\n  var _a = react_1.useState(false),\n      isHovered = _a[0],\n      setIsHovered = _a[1];\n\n  var _b = react_1.useState(null),\n      videoEl = _b[0],\n      _setVideoEl = _b[1];\n\n  var _c = react_1.useState(props.muted),\n      muted = _c[0],\n      setMuted = _c[1];\n\n  var _d = react_1.useState(false),\n      mutedByBrowser = _d[0],\n      setMutedByBrowser = _d[1];\n\n  var setVideoEl = props.setVideoEl,\n      onMuted = props.onMuted,\n      onUserMuted = props.onUserMuted;\n  var height = props.height || js_util_1.getGifHeight(gif, width);\n\n  var _e = react_use_1.useTimeoutFn(function () {\n    setIsHovered(false);\n  }, AUTO_HIDE_TIMEOUT),\n      cancelHideTimeout = _e[1],\n      resetHideTimeout = _e[2];\n\n  var combinedOnMuted = react_1.useCallback(function (args) {\n    onMuted === null || onMuted === void 0 ? void 0 : onMuted(args);\n    setMutedByBrowser(args);\n  }, [setMutedByBrowser, onMuted]);\n  var combinedSetVideoEl = react_1.useCallback(function (args) {\n    setVideoEl === null || setVideoEl === void 0 ? void 0 : setVideoEl(args);\n\n    _setVideoEl(args);\n  }, [setVideoEl, _setVideoEl]);\n\n  var toggleMute = function () {\n    if (mutedByBrowser) {\n      setMutedByBrowser(false);\n      setMuted(false);\n    } else {\n      setMuted(!muted);\n    }\n  };\n\n  react_1.useEffect(function () {\n    setMuted(props.muted);\n  }, [props.muted]);\n  var showControls = persistentControls || isHovered;\n  var isLargePlayer = height >= LARGE_PLAYER_HEIGHT; // Manage auto hide controls\n\n  react_1.useEffect(function () {\n    if (showControls) {\n      resetHideTimeout();\n    } else {\n      cancelHideTimeout();\n    }\n\n    return function () {\n      return cancelHideTimeout();\n    };\n  }, [showControls, cancelHideTimeout, resetHideTimeout]);\n  return react_1.default.createElement(Container, {\n    className: className,\n    style: {\n      width: width,\n      height: height\n    },\n    onMouseOver: function () {\n      return setIsHovered(true);\n    },\n    onMouseLeave: function () {\n      return setIsHovered(false);\n    },\n    onMouseMove: function () {\n      setIsHovered(true);\n      resetHideTimeout();\n    },\n    onClick: function (e) {\n      // TODO on mobile, maybe here we'd want to not mute if\n      // controls are hidden, mute and show controls are the same action\n      // which could be annoying\n      onUserMuted === null || onUserMuted === void 0 ? void 0 : onUserMuted(!(muted || mutedByBrowser)); // adding this, it may save us if the browser blocks autoplay\n\n      videoEl === null || videoEl === void 0 ? void 0 : videoEl.play();\n      e.preventDefault();\n      toggleMute();\n    }\n  }, react_1.default.createElement(video_1.default, __assign({}, props, {\n    onMuted: combinedOnMuted,\n    setVideoEl: combinedSetVideoEl,\n    muted: muted\n  })), showControls && react_1.default.createElement(Gradient, {\n    isLargePlayer: isLargePlayer\n  }), react_1.default.createElement(Controls, {\n    isHovered: showControls\n  }, react_1.default.createElement(TitleContainer, null, isLargePlayer && react_1.default.createElement(Title, {\n    onClick: function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      window.open(gif.url, '_blank');\n    }\n  }, gif.title), videoEl && !hideAttribution ? react_1.default.createElement(attribution_1.default, {\n    gif: gif\n  }) : null), !hideMute && react_1.default.createElement(Volume, null, muted || mutedByBrowser ? react_1.default.createElement(volume_1.VolumeOffIcon, null) : react_1.default.createElement(volume_1.VolumeOnIcon, null))), showControls && !hideProgressBar && videoEl ? react_1.default.createElement(progress_bar_1.default, {\n    videoEl: videoEl\n  }) : null, Overlay && react_1.default.createElement(Overlay, {\n    gif: gif,\n    isHovered: isHovered,\n    width: width,\n    height: height\n  }));\n};\n\nvar VideoWrapper = function (props) {\n  if (props.overlay && !props.controls) {\n    console.warn(js_util_1.Logger.PREFIX + \": Overlays only work when controls are enabled\");\n  }\n\n  return props.controls ? react_1.default.createElement(VideoPlayer, __assign({}, props)) : react_1.default.createElement(video_1.default, __assign({}, props));\n};\n\nexports.default = VideoWrapper;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;","map":{"version":3,"sources":["../../../src/components/video/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styled_1 = __importDefault(require(\"@emotion/styled\"));\nvar js_util_1 = require(\"@giphy/js-util\");\nvar react_1 = __importStar(require(\"react\"));\nvar react_use_1 = require(\"react-use\");\nvar attribution_1 = __importDefault(require(\"./attribution\"));\nvar volume_1 = require(\"./controls/volume\");\nvar progress_bar_1 = __importDefault(require(\"./progress-bar\"));\nvar video_1 = __importDefault(require(\"./video\"));\nvar Container = styled_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    position: relative;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: black;\\n    font-family: interface, helvetica, arial;\\n    -webkit-font-smoothing: antialiased;\\n\"], [\"\\n    position: relative;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background: black;\\n    font-family: interface, helvetica, arial;\\n    -webkit-font-smoothing: antialiased;\\n\"])));\nvar Volume = styled_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    position: relative;\\n    cursor: pointer;\\n\"], [\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    position: relative;\\n    cursor: pointer;\\n\"])));\nvar Controls = styled_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n    position: absolute;\\n    top: 10px;\\n    right: 10px;\\n    left: 10px;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    opacity: \", \";\\n    transition: opacity ease-out 250ms;\\n    align-items: flex-start;\\n\"], [\"\\n    position: absolute;\\n    top: 10px;\\n    right: 10px;\\n    left: 10px;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    opacity: \", \";\\n    transition: opacity ease-out 250ms;\\n    align-items: flex-start;\\n\"])), function (props) { return (props.isHovered ? 1 : 0); });\nvar Title = styled_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n    font-size: 26px;\\n    color: white;\\n    margin-bottom: 5px;\\n    font-weight: bold;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    user-select: none;\\n    cursor: pointer;\\n\"], [\"\\n    font-size: 26px;\\n    color: white;\\n    margin-bottom: 5px;\\n    font-weight: bold;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    user-select: none;\\n    cursor: pointer;\\n\"])));\nvar TitleContainer = styled_1.default.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n    position: relative;\\n    min-width: 0;\\n\"], [\"\\n    position: relative;\\n    min-width: 0;\\n\"])));\nvar Gradient = styled_1.default.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n    &:before {\\n        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n    }\\n    &:after {\\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        bottom: 0;\\n        width: 100%;\\n    }\\n\"], [\"\\n    &:before {\\n        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n    }\\n    &:after {\\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\\n        content: '';\\n        height: \", \"px;\\n        left: 0;\\n        pointer-events: none;\\n        position: absolute;\\n        bottom: 0;\\n        width: 100%;\\n    }\\n\"])), function (props) { return (props.isLargePlayer ? 125 : 75); }, function (props) { return (props.isLargePlayer ? 125 : 75); });\nvar LARGE_PLAYER_HEIGHT = 300;\nvar AUTO_HIDE_TIMEOUT = 4000;\nvar VideoPlayer = function (props) {\n    var width = props.width, hideMute = props.hideMute, hideAttribution = props.hideAttribution, hideProgressBar = props.hideProgressBar, className = props.className, persistentControls = props.persistentControls, gif = props.gif, Overlay = props.overlay;\n    var _a = react_1.useState(false), isHovered = _a[0], setIsHovered = _a[1];\n    var _b = react_1.useState(null), videoEl = _b[0], _setVideoEl = _b[1];\n    var _c = react_1.useState(props.muted), muted = _c[0], setMuted = _c[1];\n    var _d = react_1.useState(false), mutedByBrowser = _d[0], setMutedByBrowser = _d[1];\n    var setVideoEl = props.setVideoEl, onMuted = props.onMuted, onUserMuted = props.onUserMuted;\n    var height = props.height || js_util_1.getGifHeight(gif, width);\n    var _e = react_use_1.useTimeoutFn(function () {\n        setIsHovered(false);\n    }, AUTO_HIDE_TIMEOUT), cancelHideTimeout = _e[1], resetHideTimeout = _e[2];\n    var combinedOnMuted = react_1.useCallback(function (args) {\n        onMuted === null || onMuted === void 0 ? void 0 : onMuted(args);\n        setMutedByBrowser(args);\n    }, [setMutedByBrowser, onMuted]);\n    var combinedSetVideoEl = react_1.useCallback(function (args) {\n        setVideoEl === null || setVideoEl === void 0 ? void 0 : setVideoEl(args);\n        _setVideoEl(args);\n    }, [setVideoEl, _setVideoEl]);\n    var toggleMute = function () {\n        if (mutedByBrowser) {\n            setMutedByBrowser(false);\n            setMuted(false);\n        }\n        else {\n            setMuted(!muted);\n        }\n    };\n    react_1.useEffect(function () {\n        setMuted(props.muted);\n    }, [props.muted]);\n    var showControls = persistentControls || isHovered;\n    var isLargePlayer = height >= LARGE_PLAYER_HEIGHT;\n    // Manage auto hide controls\n    react_1.useEffect(function () {\n        if (showControls) {\n            resetHideTimeout();\n        }\n        else {\n            cancelHideTimeout();\n        }\n        return function () { return cancelHideTimeout(); };\n    }, [showControls, cancelHideTimeout, resetHideTimeout]);\n    return (react_1.default.createElement(Container, { className: className, style: { width: width, height: height }, onMouseOver: function () { return setIsHovered(true); }, onMouseLeave: function () { return setIsHovered(false); }, onMouseMove: function () {\n            setIsHovered(true);\n            resetHideTimeout();\n        }, onClick: function (e) {\n            // TODO on mobile, maybe here we'd want to not mute if\n            // controls are hidden, mute and show controls are the same action\n            // which could be annoying\n            onUserMuted === null || onUserMuted === void 0 ? void 0 : onUserMuted(!(muted || mutedByBrowser));\n            // adding this, it may save us if the browser blocks autoplay\n            videoEl === null || videoEl === void 0 ? void 0 : videoEl.play();\n            e.preventDefault();\n            toggleMute();\n        } },\n        react_1.default.createElement(video_1.default, __assign({}, props, { onMuted: combinedOnMuted, setVideoEl: combinedSetVideoEl, muted: muted })),\n        showControls && react_1.default.createElement(Gradient, { isLargePlayer: isLargePlayer }),\n        react_1.default.createElement(Controls, { isHovered: showControls },\n            react_1.default.createElement(TitleContainer, null,\n                isLargePlayer && (react_1.default.createElement(Title, { onClick: function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        window.open(gif.url, '_blank');\n                    } }, gif.title)),\n                videoEl && !hideAttribution ? react_1.default.createElement(attribution_1.default, { gif: gif }) : null),\n            !hideMute && react_1.default.createElement(Volume, null, muted || mutedByBrowser ? react_1.default.createElement(volume_1.VolumeOffIcon, null) : react_1.default.createElement(volume_1.VolumeOnIcon, null))),\n        showControls && !hideProgressBar && videoEl ? react_1.default.createElement(progress_bar_1.default, { videoEl: videoEl }) : null,\n        Overlay && react_1.default.createElement(Overlay, { gif: gif, isHovered: isHovered, width: width, height: height })));\n};\nvar VideoWrapper = function (props) {\n    if (props.overlay && !props.controls) {\n        console.warn(js_util_1.Logger.PREFIX + \": Overlays only work when controls are enabled\");\n    }\n    return props.controls ? react_1.default.createElement(VideoPlayer, __assign({}, props)) : react_1.default.createElement(video_1.default, __assign({}, props));\n};\nexports.default = VideoWrapper;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}